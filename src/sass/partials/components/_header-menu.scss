/* ==============================
=            Mobile            =
============================== */
$mobile-sidebar-bg-color: #ddd;

/* ----------  Parent Menu  ---------- */
$mobile-parent-menu-item-border-bottom: rem-calc(1) solid rgba(#000, 0.1);
$mobile-parent-menu-link-bg-color: transparent;
$mobile-parent-menu-link-color: green;
$mobile-parent-menu-link-hover-bg-color: rgba(#000, 0.1);
$mobile-parent-menu-link-hover-color: green;
$mobile-parent-menu-item-font-size: rem-calc(24);
$mobile-parent-menu-item-padding-block: rem-calc(13);
$mobile-parent-menu-item-padding-inline: rem-calc(20);
$mobile-parent-menu-current-item-link-bg-color: green;
$mobile-parent-menu-current-item-link-color: #fff;
$mobile-parent-menu-dropdown-bg-color: #000;
$mobile-parent-menu-dropdown-icon-color: green;
$mobile-parent-menu-dropdown-hover-bg-color: #fff;
$mobile-parent-menu-dropdown-hover-icon-color: green;

/* Sub Menu */
$mobile-sub-menu-font-size: rem-calc(18);
$mobile-sub-menu-bg-color: teal;
$mobile-sub-menu-link-bg-color: transparent;
$mobile-sub-menu-link-hover-bg-color: rgba(#000, 0.5);
$mobile-sub-menu-link-color: green;
$mobile-sub-menu-link-hover-color: #000;
$mobile-sub-menu-link-padding-block: rem-calc(13);

// usually this is same as parent menu
$mobile-sub-menu-link-padding-inline: rem-calc(20);

.header-nav {
	ul {
		@include list-unstyled;
	}

	li {
		margin-bottom: 0;
	}

	a {
		text-decoration: none;
		display: block;
		height: 100%;
	}
	@include media-breakpoint-up(lg) {
		float: right;
	}

	@include media-breakpoint-down(lg) {
		background-color: $mobile-sidebar-bg-color;
		width: 100%;
		height: 100vh;
		padding: rem-calc(90) 0 rem-calc(40);
		position: fixed;
		top: 0;
		right: 0;
		bottom: 0;
		z-index: 9999;
		transform: translateX(-100%);
		transition: 350ms transform cubic-bezier(0.465, 0.183, 0.153, 0.946);
		overflow: auto;
		overscroll-behavior: contain; // avoid scroll chaining

		&.js-active {
			box-shadow: 0 0 rem-calc(10) rgba(#999, 0.3);
			transform: translateX(0);
		}
	}
}

.header-nav-parent-menu {
	@include media-breakpoint-down(lg) {
		> li {
			> a {
				background-color: $mobile-parent-menu-link-bg-color;
				color: $mobile-parent-menu-link-color;
				font-size: $mobile-parent-menu-item-font-size;
				text-align: center;
				text-decoration: none;
				display: block;
				padding: $mobile-parent-menu-item-padding-block
					$mobile-parent-menu-item-padding-inline;
				position: relative;

				&:hover,
				&:focus {
					background: $mobile-parent-menu-link-hover-bg-color;
					color: $mobile-parent-menu-link-hover-color;
				}
			}
		}

		> li.current-page-ancestor > a,
		> li.current-menu-parent > a,
		> li.current-menu-item > a {
			background: $mobile-parent-menu-current-item-link-bg-color;
			color: $mobile-parent-menu-current-item-link-color;
		}

		// Submenu
		> li.menu-item-has-children {
			position: relative;

			&.js-active {
				.sub-menu {
					visibility: visible;
					height: auto;
				}
			}
		}

		.menu-item-has-children {
			> a {
				position: relative;

				span {
					background: $mobile-parent-menu-dropdown-bg-color;
					width: rem-calc(45);
					position: absolute;
					top: 0;
					right: 0;
					bottom: 0;

					&.js-active {
						&::after {
							border-top-width: 0;
							border-bottom-color: $mobile-parent-menu-dropdown-icon-color;
						}
					}

					&::after {
						margin-inline-start: rem-calc(-6);
						margin-top: rem-calc(-4);
						border: rem-calc(8) solid transparent;
						border-top-color: $mobile-parent-menu-dropdown-icon-color;
						border-right-width: rem-calc(6);
						position: absolute;
						top: 50%;
						left: 50%;
						content: '';
						border-inline-start-width: rem-calc(6);
					}

					&:hover,
					&:focus {
						// background: $mobile-parent-menu-dropdown-hover-bg-color;
						&::after {
							border-top-color: $mobile-parent-menu-dropdown-hover-icon-color;
						}
					}
				}
			}
		}
	}
}

.header-nav .sub-menu {
	@include media-breakpoint-down(lg) {
		background: $mobile-sub-menu-bg-color;
		visibility: hidden;
		height: 0;

		.sub-menu {
			background-color: #fff;
		}

		> li {
			text-align: center;

			> a {
				background-color: $mobile-sub-menu-link-bg-color;
				color: $mobile-sub-menu-link-color;
				font-size: $mobile-sub-menu-font-size;
				letter-spacing: rem-calc(1);
				text-decoration: none;
				text-transform: uppercase;
				display: block;
				padding: $mobile-sub-menu-link-padding-block
					$mobile-sub-menu-link-padding-inline;

				&:hover,
				&:focus {
					background: $mobile-sub-menu-link-hover-bg-color;
					color: $mobile-sub-menu-link-hover-color;
				}
			}
		}
	}
}

/* ===============================
=            Desktop            =
=============================== */

/* ----------  Parent Menu  ---------- */
$desktop-parent-menu-link-bg-color: #ccc;
$desktop-parent-menu-link-color: #000;
$desktop-parent-menu-link-hover-bg-color: green;
$desktop-parent-menu-link-hover-color: #fff;
$desktop-parent-menu-item-padding-block: rem-calc(15);
$desktop-parent-menu-item-padding-inline: rem-calc(20);
$desktop-parent-menu-current-item-link-bg-color: red;
$desktop-parent-menu-current-item-link-color: #fff;
$desktop-parent-menu-dropdown-icon-color: black;
$desktop-parent-menu-dropdown-icon-hover-color: #fff;
$desktop-parent-menu-dropdown-icon-border: rem-calc(5);
$desktop-parent-menu-space-between-text-and-arrow: rem-calc(10);

/* ----------  Sub Menu  ---------- */
$desktop-sub-menu-width: rem-calc(250);
$desktop-sub-menu-link-bg-color: black;
$desktop-sub-menu-link-color: #fff;
$desktop-sub-menu-link-hover-bg-color: orange;
$desktop-sub-menu-link-hover-color: $desktop-sub-menu-link-color;
$desktop-sub-menu-current-item-link-bg-color: purple;
$desktop-sub-menu-current-item-link-color: #fff;
$desktop-sub-menu-font-size: rem-calc(16);
$desktop-sub-menu-link-padding-block: rem-calc(12);
$desktop-sub-menu-link-padding-inline: $desktop-parent-menu-item-padding-inline; // usually this is same as parent menu

// Desktop Parent Menu
////////////////////////////////////////////////
.header-nav-parent-menu {
	@include media-breakpoint-up(lg) {
		> li {
			float: left;

			&:not(:last-child) {
				margin-inline-end: rem-calc(20);
			}

			&:hover,
			&:focus {
				> a {
					background-color: $desktop-parent-menu-link-hover-bg-color;
					color: $desktop-parent-menu-link-hover-color;
				}
			}

			> a {
				background-color: $desktop-parent-menu-link-bg-color;
				color: $desktop-parent-menu-link-color;
				display: block;
				padding: $desktop-parent-menu-item-padding-block
					$desktop-parent-menu-item-padding-inline;
			}
		}

		> li.current-page-ancestor > a,
		> li.current-menu-parent > a,
		> li.current-menu-item > a {
			background-color: $desktop-parent-menu-current-item-link-bg-color;
			color: $desktop-parent-menu-current-item-link-color;
		}

		> li.menu-item-has-children {
			position: relative;

			> a {
				/* stylelint-disable scss/operator-no-newline-after */
				padding-inline-end: $desktop-parent-menu-item-padding-block +
					$desktop-parent-menu-dropdown-icon-border +
					$desktop-parent-menu-dropdown-icon-border +
					$desktop-parent-menu-space-between-text-and-arrow;
				/* stylelint-enable scss/operator-no-newline-after */

				&::after {
					margin-top: rem-calc(-2);
					border: $desktop-parent-menu-dropdown-icon-border solid
						transparent;
					border-top-color: $desktop-parent-menu-dropdown-icon-color;
					position: absolute;
					top: 50%;
					right: $desktop-parent-menu-item-padding-block;
					transition:
						250ms color,
						250ms background-color;
					content: '';
				}
			}

			&:hover,
			&:focus {
				> a {
					color: $desktop-parent-menu-link-hover-color;

					&::after {
						border-top-color: $desktop-parent-menu-dropdown-icon-hover-color;
					}
				}
			}
		}

		li.menu-item-has-children {
			&:hover,
			&focus {
				> .sub-menu {
					visibility: visible;
					z-index: 10;
					opacity: 1;
					pointer-events: auto;
				}
			}
		}
	} // breakpoint
}

// Desktop Sub Menu
////////////////////////////////////////////////
.header-nav-parent-menu {
	@include media-breakpoint-up(lg) {
		.sub-menu {
			visibility: hidden;
			width: $desktop-sub-menu-width;
			position: absolute;
			z-index: -1;
			opacity: 0;
			transition:
				250ms color,
				250ms background-color,
				opacity 0.15s;
			pointer-events: none;

			> li {
				line-height: 1.3;

				&:hover,
				&:focus {
					> a {
						background-color: $desktop-sub-menu-link-hover-bg-color;
						color: $desktop-sub-menu-link-hover-color;
					}
				}

				> a {
					background-color: $desktop-sub-menu-link-bg-color;
					color: $desktop-sub-menu-link-color;
					font-size: $desktop-sub-menu-font-size;
					display: block;
					padding: $desktop-sub-menu-link-padding-block
						$desktop-sub-menu-link-padding-inline;
					border-bottom: rem-calc(1) solid
						$desktop-sub-menu-link-bg-color;
				}
			}

			> li.current-menu-item > a {
				background-color: $desktop-sub-menu-current-item-link-bg-color;
				color: $desktop-sub-menu-current-item-link-color;
			}
		}

		// first sub menu
		> li > .sub-menu {
			top: 100%;
			left: 0;

			> li.menu-item-has-children > a {
				// padding-inline-end: $desktop-parent-menu-item-padding-block +
				// 	$desktop-parent-menu-dropdown-icon-border +
				// 	$desktop-parent-menu-dropdown-icon-border +
				// 	$desktop-parent-menu-space-between-text-and-arrow; //chevron icon
				position: relative;

				&::after {
					margin-top: rem-calc(-4);
					border: $desktop-parent-menu-dropdown-icon-border solid
						transparent;
					position: absolute;
					top: $desktop-parent-menu-item-padding-inline;
					right: $desktop-parent-menu-item-padding-block;
					transition:
						250ms color,
						250ms background-color;
					content: '';
					border-inline-start-color: $desktop-parent-menu-dropdown-icon-hover-color;
				}
			}
		}

		// second sub menu
		.sub-menu .sub-menu {
			width: fit-content;
			min-width: $desktop-sub-menu-width;
			max-width: 40vw;
			top: 0;
			left: $desktop-sub-menu-width;
		}
	}
}
